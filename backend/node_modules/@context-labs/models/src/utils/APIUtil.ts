import { ServiceResponse, ServiceError } from '../interfaces/common';
import StatusCodes from '../enums/StatusCodes';

function isErrorResponse(response: ServiceResponse): response is Required<ServiceResponse> {
  return (response as Required<ServiceResponse>).error !== undefined;
}

function isError(error: any): error is Required<ServiceError> {
  return (error as Required<ServiceError>).message !== undefined;
}

function isFieldError(error: ServiceError): error is Required<ServiceError> {
  return (error as Required<ServiceError>).fields !== undefined;
}

const isSuccessfulResponse = (response: ServiceResponse): boolean => response.status === StatusCodes.OK;

const APIUtil = {
  isErrorResponse,
  isError,
  isFieldError,
  isSuccessfulResponse,
};

export default APIUtil;
